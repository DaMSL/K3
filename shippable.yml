build_image: damsl/k3-base
env:
  - GHCVER=7.8.3
  - CABALVER=1.20
install:
  - cd /k3/K3-Core
  - git clone https://github.com/DaMSL/K3-Core.git .
  - cd /k3/K3-Driver
  - git clone https://github.com/DaMSL/K3-Driver.git .
  - cabal sandbox init
  - cabal sandbox add-source /k3/K3-Core
script:
  - pwd
  - cd /k3/K3-Driver
  - cabal install --only-dependencies --disable-documentation
  - cabal configure
  - cabal build
    #- scripts/tests/tests.py -l scripts/tests/passed_tests.txt
  - ./compile.sh ../K3-Core/examples/fibonacci.k3
  - ./compile.sh ../K3-Core/examples/distributed/amplab/q1.k3
    #- ./compile.sh ../K3-Core/examples/distributed/amplab/q2.k3
