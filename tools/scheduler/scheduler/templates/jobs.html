{% extends "layout/base.html" %}

{% block content %}
  <div class="container">
    <div class="starter-template">
          <h3>Active Compiling Jobs</h3>
          <table class="table table-striped">
            <tr> <th>Build</th><th>Output</th><th>Time Submit</th><th>Time Complete</th><th>Status</th><th>Kill</th><th></th></tr>
          {% for job in compilelist %}
                {% if job.status != "COMPLETE" and job.status != "KILLED" and job.status != "FAILED" %}
                <tr>
                  <td><a href="/fs/build/{{job.name}}/{{job.uid}}">{{job.name}}-{{job.uid}}</a></td>
                  <td><a href="/compile/{{job.name}}-{{job.uid}}">Output</a></td>
                    <td>{{job.submit}}</td>
                    <td>{{job.complete}}</td>
                    <td>{{job.status}}</td>
                    <td><a href="/compile/{{job.name}}-{{job.uid}}/kill">
                        <button class="btn btn-danger btn-sm">Kill</button></a></td>
                </tr>
                {% endif %}
          {% endfor %}
          </table>

          <h3>Active K3 Jobs</h3>
          <table class="table table-striped">
          {% for job in joblist %}
            {% if job.status == "SUBMITTED" or job.status == "RUNNING" %}
            <tr><td><a href="/jobs/{{job.appName}}/{{job.jobId}}/status">{{job.jobId}}</a></td>
                <td>{{job.appName}}</td><td>{{job.user}}</td><td>{{job.time}}</td><td>{{job.status}}</td>
                <td><a href="/jobs/{{job.appName}}/{{job.jobId}}/kill">
                    <button class="btn btn-danger btn-sm">Kill</button></a></td>
            </tr>
            {% endif %}
          {% endfor %}
          </table>


          <h3>Inactive K3 Jobs</h3>
            <form action="/delete/jobs" method=post enctype=multipart/form-data>
          <table class="table table-striped">
              <tr><th>Job ID</th><th>Application</th><th>User</th><th>Submitted</th>
              <th>Status</th><th>Replay</th><th>Delete</th></tr>
          {% for job in joblist %}
            {% if job.status != "SUBMITTED" and job.status != "RUNNING" %}
            <tr><td><a href="/jobs/{{job.appName}}/{{job.jobId}}/status">{{job.jobId}}</a></td>
                <td>{{job.appName}}</td><td>{{job.user}}</td><td>{{job.time}}</td><td>{{job.status}}</td>
                <td><a href="/jobs/{{job.appName}}/{{job.jobId}}/replay">Replay {{job.jobId}}</a></td>
                    <td><input type="checkbox" name="delete_job" value="{{job.jobId}}"></td>
            </tr>
            {% endif %}
          {% endfor %}
        </table>
           <div class="row text-right"><button type=submit class="btn btn-danger btn-md">
               Delete Selected Inactive K3 Jobs</button></div>
        </form>


          <h3>Inactive Compiling Jobss</h3>
          <form action="/delete/compiles" method=post enctype=multipart/form-data>
          <table class="table table-striped">
            <tr> <th>Build</th><th>Output</th><th>Time Submit</th><th>Time Complete</th><th>Status</th><th>Kill</th></tr>
          {% for job in compilelist %}
                <tr>
                    <td><a href="/fs/build/{{job.name}}-{{job.uid}}">{{job.name}}-{{job.uid}}</a></td>
                    <td><a href="/compile/{{job.name}}-{{job.uid}}">Output</a></td>
                    <td>{{job.submit}}</td>
                    <td>{{job.complete}}</td>
                    <td>{{job.status}}</td>
                <td><input type="checkbox" name="delete_compile" value="{{job.uid}}"></td>
                </tr>
          {% endfor %}
          </table>
          <div class="row text-right"><button type=submit class="btn btn-danger btn-md">
               Delete Selected Inactive Compiling Jobs</button></div>
          </form>

    </div>
  </div>
{% endblock %}

{% block footer %}
  {% include "include/footer.html" %}
{% endblock %}

