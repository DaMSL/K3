include "Core/Builtins.k3"
include "Annotation/Vector.k3"

declare t : collection {x: int, y: real } @Vector

declare t2 : collection {x: int, y: real } @Vector

trigger start : ()  = \_ -> (
	t.insert {x:1, y:1.1 };
	t.insert {x:2, y:2.2};
	
	(bind (t.fold (\acc -> \rec -> (  { x: rec.x+acc.x, y: rec.y+ acc.y} ) ) {x:0, y:0.0}) as {x: x, y: y} in (print (itos x); t2.insert {x: x, y: y })  )	
)

source s1 : () = value ()
feed s1 |> start
